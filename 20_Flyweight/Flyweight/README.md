# Flyweight
勉強時間  
2023/05/06 0.7h  
2023/05/09 1.0h + 1.5h

## そのパターンの用途、どんなケースに適用できるか
Flyweightとはライト級、つまり軽いという意味。  
インスタンスをできるだけ共有し、メモリ消費量が少ない軽いオブジェクトを作る。  
同じインスタンスが複数回登場するような場面で使える。  

## 作成したサンプルコードの概要説明
上場企業の企業の情報をどこかから取得して、それを画面に表示するようなシステムを考える  
取得した企業のデータは保持しておいて、再度取得したときは無駄にnewせずにそれを使い回すことでメモリ消費量を少なくできないか？  

## クラス図の説明

## ソースコードの説明

## そのパターンを適用した場合のメリット
今回の例では特にメモリの使用量を抑えているわけではなく、メリットが感じられなかった。  
単にプールしておいて、それを使い回すだけなので、あまり意味がない。  
逆にプールしないほうがGCが働いてメモリ節約になると思う。  
クラス図としては同じような構成になったが、Flyweightパターンとは言えないと思う。  

調べてみると、シューティングゲームの弾に対してFlyweightパターンを使うというのがあった。  
http://marupeke296.com/DP_Flyweight.html  
業務アプリで同じものを大量に描画したりするようなシーンが思い浮かばず、業務アプリで使うとなるとどういうときだろうと思った。


## FlyweightFactory役の中のこのAPI呼んで、CompanyInfoに詰め替える処理はここにあるべきか？
自分としては今のままで良いのでは？と思った。
以下考えたこと。

責務という観点で見るとFactoryというクラスは作ることが責務  
となると、どうやって作るのかも全部Factoryが持ったほうがいいのでは？  
（つまり今のままがいいのでは？）

・実際に移動させたときに感じた点
移動させたことで他のクラスからも作成のロジックが使えるようになり、汎用性が高くなった。  
その反面、作るのがFactoryからじゃなくてもできるので、Factoryを使うのかCompanyInfoのCreateを呼ぶのかどっちを使うんだと悩む。  
「Factory」という名称よりも「キャッシュするやつ」みたいなクラス名であれば、どっちを使えばいいか悩まないし、処理を移動しても違和感がないように思った。  

